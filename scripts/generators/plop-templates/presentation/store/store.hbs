import { ref } from 'vue'
import { defineStore } from 'pinia'
import type { I{{pascalCase resource}} } from '@{{feature}}/domain/entities/{{resource}}.entity'

export const use{{pascalCase resource}}Store = defineStore('{{resource}}', () => {
  // Estado
  const items = ref<I{{pascalCase resource}}[]>([])
  const isLoading = ref(false)

  // Mutadores
  function setLoading(value: boolean) {
    isLoading.value = value
  }

  function set{{pascalCase resource}}s(list: I{{pascalCase resource}}[]) {
    items.value = list
  }

  function set{{pascalCase resource}}(item: I{{pascalCase resource}}) {
    items.value = [item]
  }

  function add{{pascalCase resource}}ToList(item: I{{pascalCase resource}}) {
    items.value.push(item)
  }

  function update{{pascalCase resource}}InList(item: I{{pascalCase resource}}) {
    const idx = items.value.findIndex(i => i.id === item.id)
    if (idx !== -1) {
      items.value[idx] = item
    }
  }

  function remove{{pascalCase resource}}FromList(id: string) {
    items.value = items.value.filter(i => i.id !== id)
  }

  return {
    // state
    items,
    isLoading,

    // actions
    setLoading,
    set{{pascalCase resource}}s,
    set{{pascalCase resource}},
    add{{pascalCase resource}}ToList,
    update{{pascalCase resource}}InList,
    remove{{pascalCase resource}}FromList,
  }
})
